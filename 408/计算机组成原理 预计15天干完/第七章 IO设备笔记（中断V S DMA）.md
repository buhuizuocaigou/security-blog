核心 ：中断相关的梳理 
例如：中断判定  
优先级判断 
硬件中断>软件中断   
非屏蔽中断>屏蔽中断 
DMA请求>I/o设备
### 一  关于中断 
1 程序中断的基本概念 
定义 ：在程序正常执行中，由软硬件产生信号，并且迫使cpu暂时停止当期那的任务 ，然后存档而去先执行预先定义的ISR(中断服务程序)
目的：提高响应速度，能让cpu即使处理外部设备跟内部事件 

2中断分类：
硬件（外部）中断：由外部信息 外设等产生的中断信号 外部是相对于cpu内部而言的外部
内部中断 ：cpu内部异常或者错误引发的中断   这种cpu内部终端称作异常 
软件中断 ： 特定指令产生的中断。比如我们用c语言调试的时候 系统调用的时候
可屏蔽中断 ：设计者控制寄存器来屏蔽或者允许中断  
不可屏蔽 中断 ：中断无法人为干预 ，一般肯定是那种系统级别的才可以运行  

3关于部分不同中断详细描写 

#### (1)内部中断 (异常或者陷阱)
CPU==内部==在执行指令过程中检测到某种错误 或者异常引发的 ，在cpu运行时候发现内部的运行自查都是自，不是依赖于挖补设备触发 
可以分为 ：
##### 1 陷阱 (Trap)：
预先定义的条件或者事件，cpu在正常指令执行过程中发现，通常是特定指令(系统调用功能)执行但是会检测到异常或者特殊处理  
是一种同步事件 他是在程序指令某指令后立即产生的具有同步性   

定义：触发条件 ：
通常在执行某种特定指令或者遇到某些特定的情况的时候cpu自动产生  
2 处理方式：
当陷阱发生时候,cpu会立即停止当前指令的执行 ，并且保存当前处理器状态，然后跳转到预定义的陷阱处理程序中(通常是OS的内核的一部分)处理四件 
3 陷阱作用 ：
系统调用  ：广泛应用于系统调用  可以采用 INT  SYSCALL等请求才做系统内核调用 ，用户通过上述产生的指令与操作系统内核进行互动等
调试：当进行断点或者单步的时候，会产生陷阱
异常：如果出现算术溢出 等  非法操作码的鞥，陷阱会触发异常

3常见类型：
 系统调用陷阱 ：
   用户通过触发特定的陷阱用来跟os内核进行某些联动 
断点陷阱 ：
   设置断点或者单步执行陷阱，用于调试目的 
    溢出陷阱 ：与of位设置的值有关
     非法操作码 陷阱  触发方式：程序代码损坏或者意外执行数据段指令，cpu无法识别操作在吗触发陷阱 
     如果出现非法指令可以导致程序终止的行窃 
 、
      调试陷阱：产生断点 单步执行等 
      调试硬件断点或者单步模式捕获程序的执行状态的陷阱 

陷阱与其他的不同：硬件中断通常异步 而陷阱大多数已同步的 当指令立即执行的时候陷阱随即产生 

##### 故障 
指的是cpu在执行指令发现了立即需要处理的问题，指的是可修复的问题，档处理完后cpu可以重新执行，处理完毕后，cpu可以重新执行引发故障的指令
例子：
1 页面错误：当程序访问的内存页面在物理内存找不到的时候，或者是没有相应的权限，触发的页面错误 操作系统通过页面错误机制进行内存管理，把需要的页面从磁盘加载到内存中去 
场景描述：某程序尝试访问虚拟内存地址 ，发现对应页面没加载到物理内存中，cpu触发页面错误，操作系统会把页面从磁盘 调入内存后重新执行   
2 保护错误：程序执行未授权的操作，或者访问受保护的内存区域的时候触发保护错误，并且保护错误通常跟内存保护机制相关
主要设计内核态与用户态之间  。程序尝试写入制度内存区域，或者访问内核态 但是用户处于用户态 会引发保护错误 cpu中断并且转移到故障处理程序
3段错误：
定义：程序视图访问未分配未授权的内存段时候，试图访问空指针或者超出范围的指针的时候
触发场景：访问指向无效内存地址的指针的时候，或者这个内存所在的磁盘根本不存在，或者镀锡os未分配的内存断点时候 会触发段错误  
报错信息：Segmentation fault 错误信息 
4对齐错误 ：
  定义：发生在程序视图访问一个未对齐的数据的时候，数据内存的地址未按找预期方式对齐，并且32位的整数位在4字节处对齐等 
  例子 ARM 等尝试访问并没对齐的地址 发生子啊智力
5双重故障：
当cpu处理一个故障的时候嵌套另外一个 
6总线错误 ：访问内存或者I/O设备时候由于硬件问题或者无效地址引发的 

#### 终止：
定义：指的是cpu遇到严重的无法恢复执行错误引发中断，表示系统或者程序处于无法执行状态的并且错误无法恢复到时再的，严重一号场  
特点：不可恢复  严重性 


##### 系统调用 ：
系统调用实际上是出发了一种特殊的夏宁 ，是由特定的指令触发的，并且通过系统调用触发内部终中断的过程

##### 断点 ：
定义: 调试器设置的特殊中断 ，程序在此处暂停并且便于检查其他的东西 

#### 非法操作码 
错误程序代码
数据误读指令 
损坏的可执行文件  
特权级别错误 
#### 零除（Divide by Zero）
定义：cpu执行除法指令特有的  主要是 div idiv富有的  当出现除数为0的时候 触发中断 

#### 溢出 
定义：指的是在算术阶段 结果超出CPU表示范围的时候触发中断氢气指令  
算术操作后 可以用INTO 检查是否发生溢出 来判断 是否发出中断请求 


### 中断中的可屏蔽中断 跟不可屏蔽中断 

一 可屏蔽中断 ：
定义：指的是可以被cpu屏蔽或者延迟处理的中断信号，通常与外设额或者软件中断请求相关 ，可以通过设置cpu的中断屏蔽位IF 标志位 暂时忽略这个终端 
例如：
键盘中断 ：
场景描述：当用户按下键盘某个键 ，键盘向cpu发出某个中断请求，并且看cpu是否屏蔽 
键盘 的中断次序比较低 

定时器中断 ：
系统定时器 (PIT)定期向CPU发送中断信号，以完成定时设置的某些目的，比如定期更新某些软件等 

网络中断：
网络接收到数据包的时候 会向cpu发送中断请求  提示新数据发送 
#### 二  不可屏蔽中断 （NMI）
无法被cpu屏蔽或者处理的中断信号 处理紧急情况
必须被马上处理 
#### 例子：
硬件故障中断：
      场景：当系统检测到严重硬件故障，内存奇偶校验错误（Meomory Parity Error）或电源即
      失效，将触发不可屏蔽中断，通知cpu立即处理。
      解释：中断设计关系到硬件健康 必须立即响应 
电源故障中断：
      场景：在某些系统中，当电源失效电压异常的时候 直接不可屏蔽中断
      解释：中断无法被忽略。
看门狗定时器中断:
      场景：用于检测系统是否卡死或者出现死循环，不可屏蔽中断 
      解释：看门口定时器无法被屏蔽，系统能够在异常喜爱自动回复
  
### 三、中断的工作过程
1 中断请求：中断事件发生的时候，外设或